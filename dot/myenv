if [ -z "$(which nvim 2>/dev/null)" ]; then 
    export EDITOR="vim"; 
    alias vi=vim
else 
    export EDITOR="nvim"; 
    export MANPAGER='nvim +Man!'
    alias vi=nvim
fi

export _MY_RC_DIR="$(dirname $(readlink ~/.vimrc))"
export _MY_BIN_DIR=$(realpath ${_MY_RC_DIR}/../bin)
export PATH=$PATH:$_MY_BIN_DIR
export POWERLEVEL9K_DISABLE_CONFIGURATION_WIZARD=true

if [ ! -z "$(which exa)" ]; then
    # using exa
    alias ls='exa'
    alias ll='ls -lFhrs time'
else 
    # using ls
    alias ls='ls --color=auto -CF'
    alias ll='ls -lFht'
fi

alias la='ls -a'
alias lla='ll -a'
alias l.='ls -d .*'
alias ll.='ll .*'
alias lr='ls -R'

alias .ml='vi ~/.myshrc.local'
alias .m='vi ~/.myshrc'
alias .me='vi ~/.myenv'
alias .v='vi ~/.vimrc'
alias .n='vi ~/.config/nvim/init.vim'
alias .z='vi ~/.zshrc'
alias .zm='vi ~/.zimrc'
alias .t='vi ~/.tmux.conf'
alias .p='vi ~/.p10k.zsh'
alias .a='vi ~/.config/alacritty/alacritty.yml'
alias .gc='vi ~/.gitconfig'
alias .gi='vi ~/.gitignore'
alias .gl='vi ~/.gitconfig.local'
alias .rc='cd ${_MY_RC_DIR}/..'
alias .x='exec zsh -l'

alias wget='wget --continue'
alias grep='GREP_OPTIONS= grep --color=auto --exclude-dir=.cvs --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn'
alias pgrep='ps aux | grep -v grep | grep -i -e VSZ -e'

alias -g ga='git add'
alias -g gl='git log --oneline --decorate --date=relative --graph -10 --pretty=format:"%C(yellow)%h %Cred%>(12,trunc)%ad %Cblue%<(12)%aN%Cgreen%d%Creset %s"'
alias -g gs='git status'
alias -g gsi='git status --ignored'
alias -g gss='git status --short'
alias -g gd='git diff'
alias -g gdt='git difftool'
alias -g gdc='git diff --cached'
alias -g gdn='git diff --relative --name-only'
alias -g gdns='git diff --relative --name-status'
alias -g gcm='git commit -m'
alias -g gcma='git commit -am'
alias -g gwta='git worktree add'
alias -g gwtp='git worktree prune'
alias -g gwtl='git worktree list'
alias -g gco='git checkout'
alias -g gbr='git branch'
alias -g gpl='git pull'
alias -g gps='git push'
alias -g gcp='git cherry-pick'
alias -g gf='git fetch'

alias tml='tmux -L default ls'
alias tma='exec tmux -L default attach -t'
alias tmn='exec tmux -L default new -s'

gri () { 
    if [ -z "${1}" ]; then
        echo "Usage: gri <number of commits>" 
        return
    fi
    git rebase -i @~"${1}"
}

# make ZSH fzf-tab plugin use tmux popup for auto completion workflows
zstyle ':fzf-tab:*' fzf-command ftb-tmux-popup
zstyle ':fzf-tab:*' popup-pad 120 80
zstyle ':fzf-tab:complete:cd:*' fzf-preview 'exa -1 --color=always $realpath'

# give a preview of commandline arguments when completing `kill`
zstyle ':completion:*:*:*:*:processes' command "ps -u $USER -o pid,user,comm -w -w"
zstyle ':fzf-tab:complete:(kill|ps):argument-rest' fzf-preview '[[ $group == "[process ID]" ]] && ps --pid=$word -o cmd --no-headers -w -w'
zstyle ':fzf-tab:complete:(kill|ps):argument-rest' fzf-flags --preview-window=down:3:wrap

# vim: ft=sh
