#!/bin/bash
# Script to setup my Working Environment.
# Sriharsha Mucheli : harshasrisri@gmail.com

set -e

dot_dir="$PWD/dot"

echo -n "Updating Repo . . . " && git pull --quiet && echo " Done"
if [ ! -e $dot_dir ]; then
    echo "FATAL: No $dot_dir!! Please \"git pull\" or \"git clone\" again."; >3
    exit
fi

echo "Linking files . . ."

for file in $(git ls-files $dot_dir/); do
    dotfile="$HOME/.${file#$(basename ${dot_dir})/}"
    mkdir -p $(dirname $dotfile)
    echo -ne "\t"
    ln -vsnf $PWD/${file} ${dotfile}
done

echo "... Done!"
